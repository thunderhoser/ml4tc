#!/bin/tcsh

#SBATCH --job-name="impute_examples"
#SBATCH --partition="fge"
#SBATCH --account="rda-ghpcs"
#SBATCH --qos="batch"
#SBATCH --ntasks=1
#SBATCH --nodes=1
#SBATCH --cpus-per-task=1
#SBATCH --time=30:00:00
#SBATCH --array=1-92
#SBATCH --exclude=h28n12
##SBATCH --exclude=h31n03,h28n12
##SBATCH --exclude=h29n01,h26n05,h28n06,h29n07,h30n03,h30n15
#SBATCH --mail-type=BEGIN,END,FAIL
#SBATCH --mail-user=ryan.lagerquist@noaa.gov
#SBATCH --output=impute_examples_%A_%a.out

module load cuda/10.1
source /scratch2/BMC/gsd-hpcs/Jebb.Q.Stewart/conda3.7/etc/profile.d/conda.csh
conda activate base

set CODE_DIR_NAME="/scratch1/RDARCH/rda-ghpcs/Ryan.Lagerquist/ml4tc_standalone/ml4tc"
set INPUT_EXAMPLE_DIR_NAME="/scratch1/RDARCH/rda-ghpcs/Ryan.Lagerquist/ml4tc_project/learning_examples/rotated_with_storm_motion"
set NORMALIZATION_FILE_NAME="${INPUT_EXAMPLE_DIR_NAME}/normalization_params_1993-2004_2015-2019.nc"
set OUTPUT_EXAMPLE_DIR_NAME="${INPUT_EXAMPLE_DIR_NAME}/imputed"

set CYCLONE_ID_GROUP_STRINGS=("1993AL01-1993AL02-1993AL03-1993AL04-1993AL05-1993AL06-1993AL07-1993AL08-1993AL09-1993AL10-1994AL01-1994AL02-1994AL03-1994AL04" "1994AL05-1994AL06-1994AL08-1994AL10-1994AL11-1994AL12-1995AL01-1995AL02-1995AL03-1995AL04-1995AL05-1995AL06-1995AL07-1995AL08" "1995AL09-1995AL10-1995AL11-1995AL12-1995AL13-1995AL14-1995AL15-1995AL16-1995AL17-1995AL18-1995AL19-1995AL20-1995AL21-1996AL01" "1996AL02-1996AL03-1996AL04-1996AL05-1996AL06-1996AL07-1996AL08-1996AL09-1996AL10-1996AL11-1996AL12-1996AL13-1997AL01-1997AL02" "1997AL03-1997AL04-1997AL05-1997AL06-1997AL07-1997AL08-1997AL09-1998AL01-1998AL02-1998AL03-1998AL04-1998AL05-1998AL06-1998AL07" "1998AL08-1998AL09-1998AL10-1998AL11-1998AL12-1998AL13-1998AL14-1999AL01-1999AL02-1999AL03-1999AL04-1999AL05-1999AL06-1999AL07" "1999AL08-1999AL09-1999AL10-1999AL11-1999AL12-1999AL14-1999AL15-1999AL16-2000AL01-2000AL02-2000AL03-2000AL04-2000AL05-2000AL06" "2000AL07-2000AL08-2000AL09-2000AL10-2000AL11-2000AL12-2000AL13-2000AL14-2000AL15-2000AL16-2000AL17-2000AL18-2000AL19-2001AL01" "2001AL02-2001AL03-2001AL04-2001AL05-2001AL06-2001AL07-2001AL08-2001AL09-2001AL10-2001AL11-2001AL12-2001AL13-2001AL14-2001AL15" "2001AL16-2001AL17-2002AL01-2002AL02-2002AL03-2002AL04-2002AL05-2002AL06-2002AL07-2002AL08-2002AL09-2002AL10-2002AL11-2002AL12" "2002AL13-2002AL14-2002EP01-2002EP02-2002EP04-2002EP05-2002EP06-2002EP08-2002EP09-2002EP10-2002EP12-2002EP13-2002EP14-2002EP15" "2002WP01-2002WP02-2002WP03-2002WP04-2002WP05-2002WP06-2002WP07-2002WP08-2002WP09-2002WP10-2002WP11-2002WP12-2002WP13-2002WP14" "2002WP15-2002WP16-2002WP17-2002WP18-2002WP19-2002WP20-2002WP21-2002WP22-2002WP23-2002WP24-2002WP25-2002WP26-2002WP27-2002WP28" "2002WP29-2002WP30-2002WP31-2003AL01-2003AL03-2003AL04-2003AL05-2003AL06-2003AL08-2003AL09-2003AL10-2003AL11-2003AL12-2003AL13" "2003AL15-2003AL16-2003AL17-2003AL18-2003AL19-2003AL20-2003AL21-2003EP01-2003EP02-2003EP03-2003EP04-2003EP05-2003EP06-2003EP07" "2003EP08-2003EP09-2003EP10-2003EP11-2003EP12-2003EP13-2003EP14-2003EP15-2003EP16-2003WP02-2003WP04-2003WP09-2003WP12-2004AL01" "2004AL02-2004AL03-2004AL04-2004AL05-2004AL06-2004AL07-2004AL08-2004AL09-2004AL11-2004AL12-2004AL13-2004AL14-2004AL15-2004AL16" "2004EP01-2004EP03-2004EP04-2004EP05-2004EP06-2004EP07-2004EP08-2004EP09-2004EP10-2004EP11-2004EP12-2004EP13-2004EP14-2004EP15" "2004EP16-2004WP03-2004WP04-2004WP07-2004WP09-2004WP10-2004WP11-2004WP13-2004WP19-2004WP20-2004WP22-2004WP25-2004WP26-2004WP27" "2004WP28-2004WP29-2004WP30-2004WP31-2004WP32-2005AL01-2005AL02-2005AL03-2005AL04-2005AL05-2005AL06-2005AL07-2005AL08-2005AL09" "2005AL10-2005AL11-2005AL12-2005AL13-2005AL14-2005AL15-2005AL16-2005AL17-2005AL18-2005AL19-2005AL20-2005AL21-2005AL22-2005AL23" "2005AL24-2005AL25-2005AL26-2005AL27-2005AL28-2005AL29-2005AL30-2005AL31-2005CP01-2005EP01-2005EP02-2005EP03-2005EP04-2005EP05" "2005EP06-2005EP07-2005EP08-2005EP09-2005EP10-2005EP11-2005EP12-2005EP13-2005EP14-2005EP15-2005EP16-2005WP01-2005WP02-2005WP03" "2005WP04-2005WP05-2005WP06-2005WP07-2005WP08-2005WP09-2005WP10-2005WP11-2005WP12-2005WP13-2005WP14-2005WP15-2005WP16-2005WP17" "2005WP18-2005WP19-2005WP20-2005WP21-2005WP22-2005WP23-2005WP24-2006AL01-2006AL03-2006AL04-2006AL05-2006AL06-2006AL07-2006AL08" "2006AL09-2006AL10-2006EP01-2006EP02-2006EP03-2006EP04-2006EP05-2006EP06-2006EP07-2006EP08-2006EP09-2006EP10-2006EP11-2006EP12" "2006EP13-2006EP14-2006EP15-2006EP16-2006EP17-2006EP18-2006EP19-2006EP20-2006EP21-2006WP01-2006WP02-2006WP03-2006WP04-2006WP05" "2006WP06-2006WP07-2006WP08-2006WP09-2006WP10-2006WP11-2006WP12-2006WP13-2006WP14-2006WP15-2006WP16-2006WP17-2006WP18-2006WP19" "2006WP20-2006WP21-2006WP22-2006WP23-2006WP24-2006WP25-2006WP26-2007AL01-2007AL02-2007AL03-2007AL04-2007AL05-2007AL06-2007AL07" "2007AL08-2007AL09-2007AL10-2007AL11-2007AL12-2007AL13-2007AL14-2007AL15-2007AL16-2007AL17-2007EP01-2007EP02-2007EP03-2007EP04" "2007EP05-2007EP06-2007EP07-2007EP08-2007EP09-2007EP10-2007EP11-2007EP12-2007EP13-2007EP14-2007EP15-2007WP01-2007WP02-2007WP03" "2007WP04-2007WP05-2007WP06-2007WP07-2007WP08-2007WP09-2007WP10-2007WP11-2007WP12-2007WP13-2007WP14-2007WP15-2007WP16-2007WP17" "2007WP19-2007WP20-2007WP21-2007WP22-2007WP23-2007WP24-2007WP25-2007WP26-2008AL01-2008AL02-2008AL03-2008AL04-2008AL05-2008AL06" "2008AL07-2008AL08-2008AL09-2008AL10-2008AL11-2008AL12-2008AL13-2008AL14-2008AL15-2008AL16-2008AL17-2008CP01-2008EP01-2008EP02" "2008EP03-2008EP04-2008EP05-2008EP06-2008EP07-2008EP08-2008EP09-2008EP10-2008EP11-2008EP12-2008EP13-2008EP14-2008EP15-2008EP16" "2008EP17-2008EP18-2008WP01-2008WP02-2008WP03-2008WP04-2008WP05-2008WP06-2008WP07-2008WP08-2008WP09-2008WP10-2008WP11-2008WP12" "2008WP13-2008WP14-2008WP15-2008WP16-2008WP17-2008WP18-2008WP19-2008WP20-2008WP21-2008WP22-2008WP23-2008WP24-2008WP25-2008WP26" "2008WP27-2009AL01-2009AL02-2009AL03-2009AL04-2009AL05-2009AL06-2009AL07-2009AL08-2009AL09-2009AL10-2009AL11-2009CP01-2009CP02" "2009CP03-2009EP01-2009EP02-2009EP03-2009EP04-2009EP05-2009EP06-2009EP07-2009EP08-2009EP09-2009EP10-2009EP11-2009EP12-2009EP13" "2009EP14-2009EP15-2009EP16-2009EP17-2009EP18-2009EP19-2009EP20-2009WP01-2009WP02-2009WP03-2009WP04-2009WP05-2009WP06-2009WP07" "2009WP08-2009WP09-2009WP10-2009WP11-2009WP12-2009WP13-2009WP14-2009WP15-2009WP16-2009WP17-2009WP18-2009WP19-2009WP20-2009WP21" "2009WP22-2009WP23-2009WP24-2009WP25-2009WP26-2009WP27-2009WP28-2010AL01-2010AL02-2010AL03-2010AL04-2010AL05-2010AL06-2010AL07" "2010AL08-2010AL09-2010AL10-2010AL11-2010AL12-2010AL13-2010AL14-2010AL15-2010AL16-2010AL17-2010AL18-2010AL19-2010AL20-2010AL21" "2010EP01-2010EP02-2010EP03-2010EP04-2010EP05-2010EP06-2010EP07-2010EP08-2010EP09-2010EP10-2010EP11-2010EP12-2010WP01-2010WP02" "2010WP03-2010WP04-2010WP05-2010WP06-2010WP07-2010WP08-2010WP09-2010WP10-2010WP11-2010WP12-2010WP13-2010WP14-2010WP15-2010WP16" "2010WP17-2010WP18-2010WP19-2011AL01-2011AL02-2011AL03-2011AL04-2011AL05-2011AL06-2011AL07-2011AL08-2011AL09-2011AL10-2011AL11" "2011AL12-2011AL13-2011AL14-2011AL15-2011AL16-2011AL17-2011AL18-2011AL19-2011AL20-2011EP01-2011EP02-2011EP03-2011EP04-2011EP05" "2011EP06-2011EP07-2011EP08-2011EP09-2011EP10-2011EP11-2011EP12-2011EP13-2011WP01-2011WP02-2011WP03-2011WP04-2011WP05-2011WP06" "2011WP07-2011WP08-2011WP09-2011WP10-2011WP11-2011WP12-2011WP13-2011WP14-2011WP15-2011WP16-2011WP17-2011WP18-2011WP19-2011WP20" "2011WP21-2011WP22-2011WP23-2011WP24-2011WP25-2011WP26-2011WP27-2012AL01-2012AL02-2012AL03-2012AL04-2012AL05-2012AL06-2012AL07" "2012AL08-2012AL09-2012AL10-2012AL11-2012AL12-2012AL13-2012AL14-2012AL15-2012AL16-2012AL17-2012AL18-2012AL19-2012EP01-2012EP02" "2012EP03-2012EP04-2012EP05-2012EP06-2012EP07-2012EP08-2012EP09-2012EP10-2012EP11-2012EP12-2012EP13-2012EP14-2012EP15-2012EP16" "2012EP17-2012WP01-2012WP02-2012WP03-2012WP04-2012WP05-2012WP06-2012WP07-2012WP08-2012WP09-2012WP10-2012WP11-2012WP12-2012WP13" "2012WP14-2012WP15-2012WP16-2012WP17-2012WP18-2012WP19-2012WP20-2012WP21-2012WP22-2012WP23-2012WP24-2012WP25-2012WP26-2012WP27" "2013AL01-2013AL02-2013AL03-2013AL04-2013AL05-2013AL06-2013AL07-2013AL08-2013AL09-2013AL10-2013AL11-2013AL12-2013AL13-2013AL14" "2013AL15-2013CP01-2013CP02-2013CP03-2013EP01-2013EP02-2013EP03-2013EP04-2013EP05-2013EP06-2013EP07-2013EP08-2013EP09-2013EP10" "2013EP11-2013EP12-2013EP13-2013EP14-2013EP15-2013EP16-2013EP17-2013EP18-2013WP01-2013WP02-2013WP03-2013WP05-2013WP06-2013WP07" "2013WP08-2013WP09-2013WP10-2013WP11-2013WP12-2013WP13-2013WP14-2013WP15-2013WP16-2013WP17-2013WP18-2013WP19-2013WP20-2013WP21" "2013WP22-2013WP23-2013WP24-2013WP25-2013WP26-2013WP27-2013WP28-2013WP29-2013WP30-2013WP31-2013WP32-2013WP33-2014AL01-2014AL02" "2014AL03-2014AL04-2014AL05-2014AL06-2014AL07-2014AL08-2014AL09-2014CP01-2014CP02-2014EP01-2014EP02-2014EP03-2014EP04-2014EP05" "2014EP06-2014EP07-2014EP08-2014EP09-2014EP10-2014EP11-2014EP12-2014EP13-2014EP14-2014EP15-2014EP16-2014EP17-2014EP18-2014EP19" "2014EP20-2014EP21-2014WP01-2014WP02-2014WP03-2014WP04-2014WP05-2014WP06-2014WP07-2014WP08-2014WP09-2014WP10-2014WP11-2014WP12" "2014WP13-2014WP14-2014WP15-2014WP16-2014WP17-2014WP18-2014WP19-2014WP20-2014WP21-2014WP22-2014WP23-2015AL01-2015AL02-2015AL03" "2015AL04-2015AL05-2015AL06-2015AL07-2015AL08-2015AL09-2015AL10-2015AL11-2015AL12-2015CP01-2015CP02-2015CP03-2015CP05-2015CP06" "2015CP07-2015CP08-2015EP01-2015EP02-2015EP03-2015EP04-2015EP05-2015EP06-2015EP07-2015EP08-2015EP09-2015EP10-2015EP11-2015EP12" "2015EP13-2015EP14-2015EP15-2015EP16-2015EP17-2015EP18-2015EP19-2015EP20-2015EP21-2015EP22-2015WP01-2015WP02-2015WP03-2015WP04" "2015WP05-2015WP06-2015WP07-2015WP08-2015WP09-2015WP10-2015WP11-2015WP12-2015WP13-2015WP14-2015WP15-2015WP16-2015WP17-2015WP18" "2015WP19-2015WP20-2015WP21-2015WP22-2015WP23-2015WP24-2015WP25-2015WP26-2015WP27-2015WP28-2015WP29-2016AL01-2016AL02-2016AL03" "2016AL04-2016AL05-2016AL06-2016AL07-2016AL08-2016AL09-2016AL10-2016AL11-2016AL12-2016AL13-2016AL14-2016AL15-2016AL16-2016CP01" "2016EP01-2016EP02-2016EP03-2016EP04-2016EP05-2016EP06-2016EP07-2016EP08-2016EP09-2016EP10-2016EP11-2016EP12-2016EP13-2016EP14" "2016EP15-2016EP16-2016EP17-2016EP18-2016EP19-2016EP20-2016EP21-2016EP22-2016WP02-2016WP03-2016WP04-2016WP05-2016WP06-2016WP07" "2016WP08-2016WP09-2016WP10-2016WP11-2016WP12-2016WP13-2016WP14-2016WP15-2016WP16-2016WP17-2016WP18-2016WP19-2016WP20-2016WP21" "2016WP22-2016WP23-2016WP24-2016WP25-2016WP26-2016WP27-2016WP28-2016WP29-2016WP30-2017AL01-2017AL02-2017AL03-2017AL04-2017AL05" "2017AL06-2017AL07-2017AL08-2017AL09-2017AL11-2017AL12-2017AL13-2017AL14-2017AL15-2017AL16-2017AL17-2017AL18-2017AL19-2017EP01" "2017EP02-2017EP03-2017EP04-2017EP05-2017EP06-2017EP07-2017EP08-2017EP09-2017EP10-2017EP11-2017EP12-2017EP13-2017EP14-2017EP15" "2017EP16-2017EP17-2017EP18-2017EP19-2017EP20-2017WP01-2017WP02-2017WP03-2017WP04-2017WP05-2017WP06-2017WP07-2017WP08-2017WP09" "2017WP10-2017WP11-2017WP12-2017WP13-2017WP14-2017WP15-2017WP16-2017WP17-2017WP18-2017WP19-2017WP20-2017WP21-2017WP22-2017WP23" "2017WP24-2017WP25-2017WP26-2017WP27-2017WP28-2017WP29-2017WP30-2017WP31-2017WP32-2017WP33-2018AL01-2018AL02-2018AL03-2018AL04" "2018AL05-2018AL06-2018AL07-2018AL08-2018AL09-2018AL10-2018AL11-2018AL12-2018AL13-2018AL14-2018AL15-2018AL16-2018CP01-2018EP01" "2018EP02-2018EP03-2018EP04-2018EP05-2018EP06-2018EP07-2018EP08-2018EP09-2018EP10-2018EP11-2018EP12-2018EP13-2018EP14-2018EP15" "2018EP16-2018EP17-2018EP18-2018EP19-2018EP20-2018EP21-2018EP22-2018EP23-2018EP24-2018EP25-2018SH01-2018SH02-2018SH03-2018SH04" "2018SH05-2018SH06-2018SH07-2018SH08-2018SH09-2018SH10-2018SH11-2018SH12-2018SH13-2018SH14-2018SH15-2018SH16-2018SH17-2018SH18" "2018SH19-2018SH20-2018SH21-2018WP02-2018WP03-2018WP04-2018WP05-2018WP06-2018WP07-2018WP08-2018WP09-2018WP10-2018WP11-2018WP12" "2018WP13-2018WP14-2018WP15-2018WP16-2018WP17-2018WP18-2018WP19-2018WP20-2018WP21-2018WP22-2018WP23-2018WP24-2018WP25-2018WP26" "2018WP27-2018WP28-2018WP29-2018WP30-2018WP31-2018WP32-2018WP33-2018WP34-2018WP35-2018WP36-2019AL01-2019AL02-2019AL03-2019AL04" "2019AL05-2019AL06-2019AL07-2019AL08-2019AL09-2019AL10-2019AL11-2019AL12-2019AL13-2019AL14-2019AL15-2019AL16-2019AL17-2019AL18" "2019AL19-2019AL20-2019EP01-2019EP02-2019EP03-2019EP04-2019EP05-2019EP06-2019EP08-2019EP09-2019EP10-2019EP11-2019EP12-2019EP13" "2019EP14-2019EP15-2019EP16-2019EP18-2019EP19-2019EP20-2019EP21-2019SH01-2019SH02-2019SH03-2019SH04-2019SH05-2019SH06-2019SH07" "2019SH08-2019SH09-2019SH10-2019SH11-2019SH12-2019SH13-2019SH14-2019SH15-2019SH16-2019SH17-2019SH18-2019SH19-2019SH20-2019SH21" "2019SH22-2019SH23-2019SH24-2019SH25-2019SH26-2019SH27-2019WP01-2019WP02-2019WP03-2019WP04-2019WP05-2019WP06-2019WP07-2019WP08" "2019WP09-2019WP10-2019WP11-2019WP12-2019WP13-2019WP15-2019WP16-2019WP17-2019WP18-2019WP19-2019WP20-2019WP21-2019WP22-2019WP23" "2019WP24-2019WP25-2019WP26-2019WP27-2019WP28-2019WP29-2019WP30")
set cyclone_id_group_string=${CYCLONE_ID_GROUP_STRINGS[$SLURM_ARRAY_TASK_ID]}
set cyclone_id_group_string="$cyclone_id_group_string:gas/-/ /"

python3 -u "${CODE_DIR_NAME}/impute_examples.py" \
--input_example_dir_name="${INPUT_EXAMPLE_DIR_NAME}" \
--cyclone_id_strings ${cyclone_id_group_string} \
--input_normalization_file_name="${NORMALIZATION_FILE_NAME}" \
--min_temporal_coverage_fraction=0.333333 \
--min_num_times=4 \
--min_spatial_coverage_fraction=0.5 \
--min_num_pixels=10000 \
--fill_value_for_isotherm_stuff=-10000000000 \
--compress_output_files=0 \
--output_example_dir_name="${OUTPUT_EXAMPLE_DIR_NAME}"
